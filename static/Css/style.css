/* =========================================================
   NexaAI UI – ChatGPT/DeepSeek-inspired (light + dark)
   Works with your existing HTML/CSS class names:
     .top-nav .sidebar .sidebar-overlay .main-container
     #messages-container .message-row .user-message .assistant-message
     .input-wrapper .input-inner #chat-input .image-preview .message-image
   ========================================================= */

/* ---------- Reset / Base ---------- */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

html, body{
  height:100%;
}

:root{
  /* layout */
  --nav-h: 60px;
  --sidebar-w: 300px;
  --content-w: 48rem;

  /* radius */
  --r-xs: 8px;
  --r-sm: 12px;
  --r-md: 16px;
  --r-lg: 20px;
  --r-pill: 999px;

  /* motion */
  --ease-out: cubic-bezier(.16, 1, .3, 1);
  --ease-in: cubic-bezier(.7, 0, .84, 0);
  --d1: 120ms;
  --d2: 180ms;
  --d3: 280ms;

  /* typography */
  --font: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* brand */
  --accent: #19c37d;
  --accent-2: #4f8cff;

  /* default (dark) */
  --bg: #0f1115;
  --panel: #151822;
  --panel-2: #1b2130;
  --panel-3: #242b3d;
  --text: #e9eef6;
  --muted: #a5b0c2;
  --border: rgba(255,255,255,.10);
  --hover: rgba(255,255,255,.06);

  /* shadows */
  --sh1: 0 1px 2px rgba(0,0,0,.18);
  --sh2: 0 10px 30px rgba(0,0,0,.22);
  --sh3: 0 30px 90px rgba(0,0,0,.35);

  /* chat */
  --assistant-row: rgba(255,255,255,.03);
  --user-bubble: rgba(255,255,255,.08);

  /* composer (DeepSeek-ish) */
  --composer-bg: rgba(255,255,255,.06);
  --composer-border: rgba(255,255,255,.14);
  --composer-focus: rgba(25,195,125,.55);
  --composer-shadow: 0 16px 40px rgba(0,0,0,.35);

  /* misc */
  --danger: #ff5c5c;
  --warning: #fbbf24;
  --link: #7dd3fc;
}

/* Light theme */
html[data-theme="light"]{
  --bg: #f7f7f8;
  --panel: #ffffff;
  --panel-2: #f3f4f6;
  --panel-3: #eaecf0;
  --text: #0b1220;
  --muted: #5b6474;
  --border: rgba(15, 23, 42, .10);
  --hover: rgba(15, 23, 42, .05);

  --sh1: 0 1px 2px rgba(15,23,42,.08);
  --sh2: 0 12px 36px rgba(15,23,42,.12);
  --sh3: 0 40px 110px rgba(15,23,42,.16);

  --assistant-row: rgba(15,23,42,.03);
  --user-bubble: rgba(15,23,42,.06);

  --composer-bg: rgba(15,23,42,.04);
  --composer-border: rgba(15,23,42,.12);
  --composer-shadow: 0 22px 60px rgba(15,23,42,.16);

  --link: #0369a1;
}

/* fallback to OS if theme not set */
@media (prefers-color-scheme: light){
  html:not([data-theme]){
    --bg:#f7f7f8;
    --panel:#fff;
    --panel-2:#f3f4f6;
    --panel-3:#eaecf0;
    --text:#0b1220;
    --muted:#5b6474;
    --border:rgba(15,23,42,.10);
    --hover:rgba(15,23,42,.05);
    --sh1:0 1px 2px rgba(15,23,42,.08);
    --sh2:0 12px 36px rgba(15,23,42,.12);
    --sh3:0 40px 110px rgba(15,23,42,.16);
    --assistant-row:rgba(15,23,42,.03);
    --user-bubble:rgba(15,23,42,.06);
    --composer-bg:rgba(15,23,42,.04);
    --composer-border:rgba(15,23,42,.12);
    --composer-shadow:0 22px 60px rgba(15,23,42,.16);
    --link:#0369a1;
  }
}

/* Backward-compatible aliases (your existing CSS used these) */
:root{
  --bg-primary: var(--bg);
  --bg-secondary: var(--panel);
  --bg-tertiary: var(--panel-2);
  --text-primary: var(--text);
  --text-secondary: var(--muted);
  --border-color: var(--border);
  --hover-bg: var(--hover);
  --accent-color: var(--accent);
}

body{
  font-family: var(--font);
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.6;
  overflow-x: hidden;
}

/* ---------- Selection / links ---------- */
::selection{
  background: rgba(25,195,125,.25);
}

a{
  color: var(--link);
}

/* ---------- Keyframes ---------- */
@keyframes fadeUp{
  from{opacity:0; transform:translateY(8px);}
  to{opacity:1; transform:translateY(0);}
}

@keyframes slideInLeft{
  from{transform:translateX(-12px); opacity:0;}
  to{transform:translateX(0); opacity:1;}
}

@keyframes pop{
  from{transform:scale(.98); opacity:.0;}
  to{transform:scale(1); opacity:1;}
}

@keyframes typing{
  0%,60%,100%{opacity:.25; transform:translateY(0);}
  30%{opacity:1; transform:translateY(-4px);}
}

@keyframes slideDown{
  from{
    opacity: 0;
    transform: translateX(-50%) translateY(-20px);
  }
  to{
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* =========================================================
   TOP NAV
   ========================================================= */
.top-nav{
  position: fixed;
  top:0;
  left:0;
  right:0;
  height: var(--nav-h);
  background: color-mix(in srgb, var(--bg-primary) 86%, transparent);
  backdrop-filter: blur(10px) saturate(140%);
  border-bottom: 1px solid var(--border-color);
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 0 14px;
  z-index: 1000;
}

.nav-left, .nav-right{
  display:flex;
  align-items:center;
  gap:10px;
}

.logo-container{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 0 10px;
  border-radius: var(--r-sm);
  transition: background var(--d2) var(--ease-out);
  cursor: pointer;
}

.logo-container:hover{
  background: var(--hover-bg);
}

.logo-icon{
  color: var(--accent-color);
}

.logo-text{
  font-size: 1.05rem;
  font-weight: 700;
  letter-spacing:.1px;
}

.model-dropdown, .model-selector-btn{
  background: transparent;
  border:none;
  color: var(--text-primary);
  font-size: .9rem;
  font-weight: 650;
  cursor:pointer;
  padding: 8px 10px;
  border-radius: var(--r-sm);
  outline:none;
  display:flex;
  align-items:center;
  gap:8px;
  transition: background var(--d2) var(--ease-out);
}

.model-dropdown:hover, .model-selector-btn:hover{
  background: var(--hover-bg);
}

.model-selector-btn{
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

#selected-model-name{
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.nav-button{
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  padding: 10px 12px;
  border-radius: var(--r-sm);
  font-size: .9rem;
  font-weight: 600;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:8px;
  transition: transform var(--d2) var(--ease-out), background var(--d2) var(--ease-out), border-color var(--d2) var(--ease-out);
}

.nav-button:hover{
  background: var(--hover-bg);
  transform: translateY(-1px);
}

.nav-button.primary{
  background: linear-gradient(135deg, var(--accent) 0%, #12b981 60%, #0ea5e9 140%);
  border: none;
  color: #04120b;
  box-shadow: 0 10px 22px rgba(25,195,125,.22);
}

.nav-button.primary:hover{
  filter: brightness(1.02);
}

.nav-button.icon-only{
  padding: 10px;
  border: none;
  background: transparent;
}

.upgrade-btn{
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  color: #111827;
  border: none;
  font-weight: 800;
}

.premium-badge-nav{
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  padding: 10px 12px;
  border-radius: var(--r-sm);
  font-size: .9rem;
  font-weight: 800;
  color:#111827;
}

.user-avatar{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent) 90%, #fff 10%);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 800;
  font-size: .9rem;
  color: #06120c;
}

/* =========================================================
   SIDEBAR (DeepSeek-like clean left column)
   ========================================================= */
.sidebar{
  position: fixed;
  left:0;
  top: var(--nav-h);
  width: var(--sidebar-w);
  height: calc(100vh - var(--nav-h));
  background: var(--bg-primary);
  border-right: 1px solid var(--border-color);
  overflow-y: auto;
  display:flex;
  flex-direction:column;
  transform: translateX(0);
  transition: transform var(--d3) var(--ease-out), box-shadow var(--d3) var(--ease-out);
  will-change: transform;
  z-index: 900;
}

.sidebar.collapsed{
  transform: translateX(-100%);
}

.sidebar.show{
  transform: translateX(0) !important;
  box-shadow: 14px 0 40px rgba(0,0,0,.25);
}

.sidebar-content{
  flex:1;
  display:flex;
  flex-direction:column;
  padding: 14px;
  gap: 16px;
}

.sidebar-section{
  flex: 1;
}

.section-title{
  font-size: .72rem;
  font-weight: 800;
  color: var(--text-secondary);
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: .08em;
}

.chat-history{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.chat-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 10px 10px;
  border-radius: var(--r-sm);
  cursor:pointer;
  transition: background var(--d2) var(--ease-out), transform var(--d2) var(--ease-out);
  font-size: .92rem;
  position: relative;
  border: 1px solid transparent;
}

.chat-item:hover{
  background: var(--hover-bg);
  transform: translateY(-1px);
}

.chat-item.active{
  background: var(--hover-bg);
  border-color: var(--border-color);
}

.chat-title{
  flex:1;
  overflow:hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.chat-actions{
  display:none;
  gap:6px;
  position:absolute;
  right: 8px;
  background: color-mix(in srgb, var(--bg-primary) 92%, transparent);
  padding: 6px;
  border-radius: 10px;
  border: 1px solid var(--border-color);
  box-shadow: var(--sh1);
}

.chat-item:hover .chat-actions{
  display:flex;
  animation: pop var(--d2) var(--ease-out);
}

.icon-btn{
  background: transparent;
  border:none;
  cursor:pointer;
  font-size: .95rem;
  padding: 6px;
  opacity: .75;
  border-radius: 10px;
  transition: opacity var(--d2) var(--ease-out), background var(--d2) var(--ease-out);
}

.icon-btn:hover{
  opacity: 1;
  background: var(--hover-bg);
}

.empty-state{
  text-align:center;
  padding: 26px 14px;
  color: var(--text-secondary);
  font-size: .9rem;
}

.sidebar-footer{
  padding: 14px;
  border-top: 1px solid var(--border-color);
}

.sidebar-footer .footer-actions{
  display:flex;
  flex-direction:column;
  gap:.5rem;
  margin-top:.75rem;
}

.sidebar-footer .footer-actions .nav-button{
  width:100%;
  justify-content:center;
}

.usage-info{
  font-size: .85rem;
}

.usage-item{
  display:flex;
  justify-content:space-between;
  margin-bottom: 8px;
  color: var(--text-secondary);
}

.usage-label{
  font-weight: 650;
}

.usage-value{
  font-weight: 900;
  color: var(--accent-color);
}

.upgrade-cta-small{
  margin-top: .75rem;
}

.upgrade-cta-small a{
  color: var(--accent-color);
  text-decoration: none;
  font-size: .85rem;
  font-weight: 600;
}

.premium-info{
  color: var(--accent-color);
  font-size: .85rem;
  text-align:center;
  padding: 10px;
}

.premium-badge-small{
  font-size: .75rem;
  color: #fbbf24;
  margin-top: .25rem;
}

.free-badge-small{
  font-size: .75rem;
  color: var(--text-secondary);
  margin-top: .25rem;
}

/* overlay (mobile sidebar) */
.sidebar-overlay{
  display:none;
  position: fixed;
  inset: var(--nav-h) 0 0 0;
  background: rgba(0,0,0,.45);
  z-index: 850;
  opacity: 0;
  transition: opacity var(--d3) var(--ease-out);
}

.sidebar-overlay.active{
  display:block;
  opacity: 1;
}

html[data-theme="light"] .sidebar-overlay{
  background: rgba(15,23,42,.22);
}

/* =========================================================
   MAIN CONTAINER
   ========================================================= */
.main-container{
  margin-top: var(--nav-h);
  min-height: calc(100vh - var(--nav-h));
  display:flex;
  flex-direction: column;
  transition: margin-left var(--d3) var(--ease-out);
}

.main-container.with-sidebar{
  margin-left: var(--sidebar-w);
}

.main-container.sidebar-collapsed{
  margin-left: 0;
}

.center-content{
  max-width: 56rem;
  margin: 0 auto;
  width: 100%;
  padding: 34px 14px 150px;
}

/* Welcome */
.welcome-section{
  text-align:center;
  padding: 82px 0 34px;
  animation: fadeUp var(--d3) var(--ease-out);
}

.main-heading{
  font-size: 2.05rem;
  font-weight: 850;
  color: var(--text-primary);
  margin-bottom: 18px;
  letter-spacing: -.02em;
}

.suggestion-cards{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin-top: 18px;
  max-width: var(--content-w);
  margin-left:auto;
  margin-right:auto;
}

.suggestion-card{
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--r-md);
  padding: 16px;
  cursor:pointer;
  transition: transform var(--d2) var(--ease-out), box-shadow var(--d2) var(--ease-out), background var(--d2) var(--ease-out);
  text-align:left;
  box-shadow: var(--sh1);
}

.suggestion-card:hover{
  background: var(--bg-tertiary);
  transform: translateY(-2px);
  box-shadow: var(--sh2);
}

.suggestion-icon{
  font-size: 1.55rem;
  margin-bottom: 10px;
}

.suggestion-text{
  font-size: .92rem;
  color: var(--text-primary);
  font-weight: 650;
  line-height: 1.4;
}

/* =========================================================
   MESSAGES (DeepSeek-like compact bubbles)
   ========================================================= */
#messages-container, .messages-container{
  display:flex;
  flex-direction:column;
  margin-bottom: 22px;
}

.message-row{
  display:flex;
  width:100%;
  justify-content:center;
  padding: 18px 14px;
  animation: fadeUp var(--d3) var(--ease-out);
}

.message-row.user-row{
  padding: 8px 14px;
  background: transparent;
}

.message-row.assistant-row:nth-child(even){
  background: var(--assistant-row);
}

.message{
  display:flex;
  gap: 12px;
  width:100%;
  max-width: 46rem;
  margin: 0 auto;
  padding: 0;
}

.user-message{
  justify-content:flex-end;
}

.assistant-message{
  justify-content:flex-start;
}

.avatar{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  background: var(--accent-color);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
  color:#04120b;
  margin-top: 3px;
  font-weight: 900;
  box-shadow: var(--sh1);
}

.message-content{
  flex:1;
  font-size: 1rem;
  line-height: 1.75;
  word-wrap: break-word;
}

.user-message .message-content{
  background: var(--user-bubble);
  border: 1px solid var(--border-color);
  padding: 12px 14px;
  border-radius: 18px;
  max-width: 34ch;
  width: fit-content;
  margin-left:auto;
  box-shadow: var(--sh1);
}

@media (min-width: 768px){
  .user-message .message-content{
    max-width: 48ch;
  }
}

.assistant-message .message-content{
  background: transparent;
  padding: 0;
  max-width: 100%;
}

.model-badge{
  font-size: .75rem;
  color: var(--text-secondary);
  margin-bottom: 8px;
  font-weight: 800;
  letter-spacing: .02em;
}

.message-text{
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* =========================================================
   IMAGE CSS (preview + in-message)
   ========================================================= */
/* in-message generated/uploaded images */
.message-image{
  margin-bottom: 10px;
}

.message-image img{
  max-width: 100%;
  max-height: 520px;
  border-radius: var(--r-md);
  display:block;
  border: 1px solid var(--border-color);
  box-shadow: var(--sh2);
  transition: transform var(--d3) var(--ease-out), box-shadow var(--d3) var(--ease-out);
  cursor: zoom-in;
}

.message-image img:hover{
  transform: translateY(-2px) scale(1.01);
  box-shadow: var(--sh3);
}

/* image preview above composer */
.image-preview{
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--r-md);
  padding: 12px;
  margin-bottom: 10px;
  box-shadow: var(--sh1);
  animation: pop var(--d2) var(--ease-out);
}

.preview-container{
  position: relative;
  display: inline-block;
}

.preview-container img{
  max-width: 220px;
  max-height: 220px;
  border-radius: var(--r-sm);
  display:block;
  border: 1px solid var(--border-color);
  box-shadow: var(--sh1);
}

.remove-image-btn{
  position:absolute;
  top: -10px;
  right:-10px;
  background: var(--danger);
  border:none;
  border-radius: 999px;
  width: 28px;
  height: 28px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition: transform var(--d2) var(--ease-out), filter var(--d2) var(--ease-out);
  color:#fff;
  box-shadow: var(--sh1);
}

.remove-image-btn:hover{
  transform: scale(1.06);
  filter: brightness(.95);
}

/* =========================================================
   Errors / Typing indicator
   ========================================================= */
.error-message{
  justify-content:center;
}

.error-message .message-content{
  background: color-mix(in srgb, var(--danger) 18%, var(--bg-secondary));
  color: #ffd0d0;
  padding: 14px;
  border-radius: var(--r-md);
  max-width: 72%;
  text-align:center;
  border: 1px solid color-mix(in srgb, var(--danger) 45%, var(--border-color));
}

.typing-indicator{
  padding: 10px;
}

.typing-dots{
  display:flex;
  gap: 6px;
  padding: 10px 0;
}

.typing-dots span{
  width: 8px;
  height: 8px;
  background: var(--text-secondary);
  border-radius: 999px;
  animation: typing 1.4s infinite;
}

.typing-dots span:nth-child(2){
  animation-delay: .2s;
}

.typing-dots span:nth-child(3){
  animation-delay: .4s;
}

/* =========================================================
   COMPOSER (DeepSeek-like bar with action pills)
   ========================================================= */
.input-wrapper{
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 18px 14px;
  background: linear-gradient(to top, var(--bg-primary) 62%, transparent);
  z-index: 100;
  transition: left var(--d3) var(--ease-out);
}

.with-sidebar .input-wrapper{
  left: var(--sidebar-w);
}

.sidebar-collapsed .input-wrapper{
  left: 0;
}

.input-box{
  max-width: 46rem;
  margin: 0 auto;
}

/* Action pills row (DeepThink / Search buttons) */
.input-actions{
  display: flex;
  gap: 10px;
  padding: 0 8px 10px 8px;
  justify-content: flex-start;
}

.action-pill{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: .9rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}

.action-pill:hover{
  transform: translateY(-1px);
  background: var(--bg-tertiary);
  border-color: color-mix(in srgb, var(--accent-color) 35%, var(--border-color));
}

.action-pill.active{
  border-color: rgba(25,195,125,.65);
  box-shadow: 0 0 0 4px rgba(25,195,125,.12);
}

.action-pill .pill-icon{
  opacity: 0.9;
}

/* Backward compatibility for old toggle buttons */
.chat-toggles{
  display: flex;
  gap: 10px;
  align-items: center;
}

.toggle-btn{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: .9rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}

.toggle-btn:hover{
  transform: translateY(-1px);
  background: var(--bg-tertiary);
}

.toggle-btn.active{
  border-color: rgba(25,195,125,.65);
  box-shadow: 0 0 0 4px rgba(25,195,125,.12);
}

.input-inner{
  background: var(--composer-bg);
  border: 1px solid var(--composer-border);
  border-radius: 18px;
  display:flex;
  align-items: center;
  padding: 10px 10px 10px 14px;
  gap: 10px;
  box-shadow: var(--composer-shadow);
  backdrop-filter: blur(10px) saturate(140%);
  transition: transform var(--d2) var(--ease-out), box-shadow var(--d2) var(--ease-out), border-color var(--d2) var(--ease-out);
}

.input-inner:focus-within{
  border-color: var(--composer-focus);
  box-shadow: 0 0 0 4px rgba(25,195,125,.16), var(--composer-shadow);
  transform: translateY(-1px);
}

.attach-button, .icon-button{
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor:pointer;
  padding: 10px;
  display:flex;
  align-items:center;
  border-radius: 12px;
  transition: background var(--d2) var(--ease-out), transform var(--d2) var(--ease-out), color var(--d2) var(--ease-out);
}

.attach-button:hover:not(.disabled),
.icon-button:hover:not(.disabled){
  color: var(--text-primary);
  background: var(--hover-bg);
  transform: translateY(-1px);
}

.attach-button.disabled,
.icon-button.disabled{
  opacity: .45;
  cursor:not-allowed;
}

#chat-input{
  flex: 1;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: 1rem;
  line-height: 1.5;
  resize: none;
  outline: none;
  max-height: 220px;
  font-family: var(--font);
  padding: 10px 0;
}

#chat-input::placeholder{
  color: color-mix(in srgb, var(--text-secondary) 90%, transparent);
}

/* send button */
.send-button{
  background: linear-gradient(135deg, var(--accent) 0%, #12b981 60%, #0ea5e9 140%);
  border: none;
  border-radius: 999px;
  width: 38px;
  height: 38px;
  min-width: 38px;
  min-height: 38px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition: transform var(--d2) var(--ease-out), filter var(--d2) var(--ease-out);
  flex-shrink: 0;
  color: #05130b;
  box-shadow: 0 10px 22px rgba(25,195,125,.22);
}

.send-button:hover{
  transform: translateY(-1px);
  filter: brightness(1.02);
}

.send-button:active{
  transform: translateY(0) scale(.98);
}

.input-footer{
  text-align:center;
  margin-top: 10px;
  font-size: .75rem;
  color: var(--text-secondary);
}

.footer-text{
  color: var(--text-secondary);
}

#model-info{
  font-weight: 850;
  color: var(--accent-color);
}

.demo-notice{
  color: var(--text-secondary);
}

.demo-notice a{
  color: var(--accent-color);
  text-decoration: none;
}

/* =========================================================
   DeepThink / Search Status UI
   ========================================================= */
.think-header{
  width: 100%;
  max-width: 46rem;
  margin: 0 auto 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text-secondary);
  font-size: 0.9rem;
  user-select: none;
}

.think-header .think-pill{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--bg-secondary) 85%, transparent);
  border: 1px solid var(--border-color);
}

.think-header .think-icon{
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  opacity: 0.9;
}

.think-box{
  width: 100%;
  max-width: 46rem;
  margin: 0 auto 14px;
  border-radius: 14px;
  border: 1px solid var(--border-color);
  background: color-mix(in srgb, var(--bg-secondary) 80%, transparent);
  overflow: hidden;
}

.think-box .think-content{
  padding: 12px 14px;
  color: var(--text-secondary);
  font-size: 0.95rem;
  line-height: 1.7;
  white-space: pre-wrap;
  border-left: 3px solid color-mix(in srgb, var(--accent-color) 45%, var(--border-color));
}

.search-status{
  width: 100%;
  max-width: 46rem;
  margin: 6px auto 14px;
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--text-secondary);
  font-size: 0.92rem;
}

.search-status .search-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent-color) 55%, #ffffff);
  box-shadow: 0 0 0 6px rgba(25,195,125,.12);
}

.search-status .search-query{
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--border-color);
  background: color-mix(in srgb, var(--bg-secondary) 90%, transparent);
  font-weight: 600;
}

/* DeepThink status counter */
#deepthink-status{
  position: fixed;
  bottom: 120px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,.45);
  border: 1px solid rgba(255,255,255,.12);
  padding: .5rem .9rem;
  border-radius: 999px;
  color: #ececec;
  z-index: 4000;
  display: none;
}

#deepthink-status-text{
  font-weight: 600;
}

#deepthink-seconds{
  margin-left: .5rem;
  color: #b4b4b4;
}

/* =========================================================
   DROPDOWN MENU
   ========================================================= */
.dropdown-menu{
  display:none;
  position:absolute;
  top: calc(var(--nav-h) + 5px);
  right: 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--r-md);
  padding: 8px;
  min-width: 240px;
  box-shadow: var(--sh2);
  animation: pop var(--d2) var(--ease-out);
  z-index: 1001;
}

.menu-header{
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 10px;
}

.user-avatar-large{
  width: 40px;
  height:40px;
  border-radius: 999px;
  background: var(--accent-color);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight: 900;
  color:#04120b;
}

.user-info{
  flex:1;
}

.user-name{
  font-weight: 850;
  font-size: .95rem;
}

.user-email{
  font-size: .82rem;
  color: var(--text-secondary);
}

.menu-divider{
  height: 1px;
  background: var(--border-color);
  margin: 8px 0;
}

.menu-item{
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 10px;
  border-radius: var(--r-sm);
  text-decoration:none;
  color: var(--text-primary);
  font-size: .9rem;
  transition: background var(--d2) var(--ease-out);
}

.menu-item:hover{
  background: var(--hover-bg);
}

/* =========================================================
   MODEL SELECTOR DROPDOWN
   ========================================================= */
.model-selector-dropdown{
  display: none;
  position: fixed;
  top: var(--nav-h);
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 900px;
  max-height: calc(100vh - 80px);
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--r-md);
  box-shadow: var(--sh3);
  z-index: 1100;
  overflow: hidden;
  animation: slideDown var(--d3) var(--ease-out);
}

.model-selector-header{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 18px;
  border-bottom: 1px solid var(--border-color);
}

.model-selector-header h3{
  font-size: 1.25rem;
  font-weight: 700;
}

.close-selector{
  background: transparent;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: var(--r-sm);
  transition: background var(--d2) var(--ease-out), color var(--d2) var(--ease-out);
}

.close-selector:hover{
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.model-selector-content{
  padding: 18px;
  max-height: calc(100vh - 160px);
  overflow-y: auto;
}

.model-group{
  margin-bottom: 22px;
}

.model-group-header{
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.group-badge{
  padding: 4px 10px;
  border-radius: 12px;
  font-size: .75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .05em;
}

.group-badge.free{
  background: #1a472a;
  color: #4ade80;
}

.group-badge.premium{
  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
  color: #000;
}

.group-title{
  font-size: .875rem;
  color: var(--text-secondary);
}

.model-card{
  background: var(--bg-primary);
  border: 2px solid var(--border-color);
  border-radius: var(--r-sm);
  padding: 14px;
  margin-bottom: 10px;
  cursor: pointer;
  transition: transform var(--d2) var(--ease-out), border-color var(--d2) var(--ease-out), background var(--d2) var(--ease-out);
}

.model-card:hover{
  border-color: var(--accent-color);
  transform: translateX(4px);
}

.model-card.active{
  border-color: var(--accent-color);
  background: rgba(25, 195, 125, 0.1);
}

.model-card-header{
  display: flex;
  gap: 12px;
  margin-bottom: 8px;
}

.model-icon{
  width: 48px;
  height: 48px;
  background: var(--bg-secondary);
  border-radius: var(--r-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  flex-shrink: 0;
}

.model-icon .icon-text{
  font-weight: 900;
}

.model-info{
  flex: 1;
}

.model-name{
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 6px;
}

.model-features{
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.feature-badge{
  padding: 2px 8px;
  border-radius: 6px;
  font-size: .75rem;
  font-weight: 600;
}

.feature-badge.vision{
  background: #1e40af;
  color: #93c5fd;
}

.feature-badge.limit{
  background: #7c2d12;
  color: #fca5a5;
}

.feature-badge.speed{
  background: #065f46;
  color: #6ee7b7;
}

.model-description{
  font-size: .875rem;
  color: var(--text-secondary);
  line-height: 1.5;
}

/* =========================================================
   MODAL
   ========================================================= */
.modal{
  display:none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.75);
  align-items:center;
  justify-content:center;
  z-index: 2000;
}

html[data-theme="light"] .modal{
  background: rgba(15,23,42,.55);
}

.modal-content{
  background: var(--bg-secondary);
  border-radius: var(--r-lg);
  padding: 22px;
  max-width: 860px;
  width: min(860px, 92vw);
  text-align:left;
  border: 1px solid var(--border-color);
  box-shadow: var(--sh3);
}

/* =========================================================
   AUTH PAGES (Login/Signup)
   ========================================================= */
.auth-page{
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(1100px 520px at 10% 15%, rgba(25,195,125,.18), transparent 60%),
              radial-gradient(900px 520px at 90% 20%, rgba(79,140,255,.18), transparent 60%),
              radial-gradient(800px 520px at 50% 110%, rgba(245,158,11,.10), transparent 55%),
              linear-gradient(180deg, var(--bg-primary), var(--bg-primary));
  padding: 2rem 1rem;
}

.auth-container{
  width: 100%;
  max-width: 1100px;
  display: grid;
  grid-template-columns: 1.1fr 0.9fr;
  gap: 2.25rem;
  align-items: center;
}

.auth-features{
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
  padding: 0.5rem 0.25rem;
}

.feature-item{
  display: flex;
  gap: 1rem;
  align-items: flex-start;
  padding: 1rem 1rem;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  backdrop-filter: blur(10px) saturate(140%);
  box-shadow: 0 18px 50px rgba(0,0,0,.12);
}

html[data-theme="light"] .feature-item{
  border: 1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.65);
  box-shadow: 0 18px 50px rgba(15,23,42,.10);
}

.feature-icon{
  font-size: 1.75rem;
  line-height: 1;
  width: 44px;
  height: 44px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(25,195,125,.12);
  border: 1px solid rgba(25,195,125,.25);
  flex-shrink: 0;
}

.feature-text h3{
  font-size: 1.05rem;
  font-weight: 800;
  margin-bottom: 0.25rem;
  color: var(--text-primary);
  letter-spacing: -0.01em;
}

.feature-text p{
  font-size: 0.95rem;
  color: var(--text-secondary);
  line-height: 1.5;
}

.auth-box{
  width: 100%;
  max-width: 470px;
  margin-left: auto;
  border-radius: 20px;
  padding: 2.25rem 2rem;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(12px) saturate(140%);
  box-shadow: 0 35px 90px rgba(0,0,0,.30);
}

html[data-theme="light"] .auth-box{
  background: rgba(255,255,255,.82);
  border: 1px solid rgba(15,23,42,.10);
  box-shadow: 0 35px 90px rgba(15,23,42,.14);
}

.auth-header{
  text-align: center;
  margin-bottom: 1.5rem;
}

.logo-icon-large{
  display: inline-block;
  margin-bottom: 0.75rem;
  filter: drop-shadow(0 12px 22px rgba(25,195,125,.18));
}

.auth-header h1{
  font-size: 1.75rem;
  font-weight: 900;
  letter-spacing: -0.02em;
  margin-bottom: 0.35rem;
}

.auth-header p{
  color: var(--text-secondary);
  font-size: 0.95rem;
}

.form-group{
  margin-bottom: 1rem;
}

.form-group label{
  display: block;
  font-size: 0.85rem;
  font-weight: 800;
  margin-bottom: 0.5rem;
  color: var(--text-primary);
}

.form-input{
  width: 100%;
  padding: 0.95rem 1rem;
  border-radius: 14px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.14);
  color: var(--text-primary);
  font-size: 1rem;
  transition: border-color 160ms ease, box-shadow 160ms ease, transform 160ms ease;
}

html[data-theme="light"] .form-input{
  background: rgba(15,23,42,.04);
  border: 1px solid rgba(15,23,42,.12);
}

.form-input::placeholder{
  color: color-mix(in srgb, var(--text-secondary) 92%, transparent);
}

.form-input:focus{
  outline: none;
  border-color: rgba(25,195,125,.65);
  box-shadow: 0 0 0 4px rgba(25,195,125,.16);
  transform: translateY(-1px);
}

.auth-button{
  width: 100%;
  margin-top: 0.25rem;
  padding: 0.95rem 1rem;
  border-radius: 14px;
  border: none;
  cursor: pointer;
  font-weight: 900;
  font-size: 1rem;
  color: #04120b;
  background: linear-gradient(135deg, var(--accent-color) 0%, #12b981 55%, #0ea5e9 140%);
  box-shadow: 0 16px 34px rgba(25,195,125,.22);
  transition: transform 180ms ease, filter 180ms ease, opacity 180ms ease;
}

.auth-button:hover{
  transform: translateY(-2px);
  filter: brightness(1.02);
}

.auth-button:active{
  transform: translateY(0) scale(.99);
}

.auth-button:disabled{
  opacity: .65;
  cursor: not-allowed;
}

.auth-divider{
  margin: 1.25rem 0;
  text-align: center;
  position: relative;
}

.auth-divider::before,
.auth-divider::after{
  content: "";
  position: absolute;
  top: 50%;
  width: 42%;
  height: 1px;
  background: var(--border-color);
}

.auth-divider::before{
  left: 0;
}

.auth-divider::after{
  right: 0;
}

.auth-divider span{
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 999px;
  border: 1px solid var(--border-color);
  background: color-mix(in srgb, var(--bg-secondary) 88%, transparent);
  color: var(--text-secondary);
  font-weight: 800;
  font-size: 0.85rem;
}

.auth-footer{
  text-align: center;
  font-size: 0.95rem;
  color: var(--text-secondary);
}

.auth-footer a{
  color: var(--accent-color);
  text-decoration: none;
  font-weight: 900;
  border-bottom: 1px solid transparent;
  transition: border-color 160ms ease;
}

.auth-footer a:hover{
  border-bottom-color: var(--accent-color);
}

.terms-text{
  margin-top: 0.85rem;
  font-size: 0.8rem;
  color: var(--text-secondary);
  text-align: center;
}

/* =========================================================
   MARKDOWN CONTENT STYLES
   ========================================================= */
.markdown-content{
  line-height: 1.8;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4{
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  color: var(--text-primary);
}

.markdown-content h1{
  font-size: 1.75rem;
  border-bottom: 2px solid var(--border-color);
  padding-bottom: 0.5rem;
}

.markdown-content h2{
  font-size: 1.5rem;
}

.markdown-content h3{
  font-size: 1.25rem;
}

.markdown-content p{
  margin-bottom: 1rem;
}

.markdown-content a{
  color: var(--accent-color);
  text-decoration: none;
  border-bottom: 1px solid transparent;
  transition: border-color var(--d2) var(--ease-out);
}

.markdown-content a:hover{
  border-bottom-color: var(--accent-color);
}

.markdown-content ul,
.markdown-content ol{
  margin: 1rem 0;
  padding-left: 2rem;
}

.markdown-content li{
  margin-bottom: 0.5rem;
}

.markdown-content blockquote{
  border-left: 4px solid var(--accent-color);
  padding-left: 1rem;
  margin: 1rem 0;
  color: var(--text-secondary);
  font-style: italic;
}

.markdown-content table{
  border-collapse: collapse;
  width: 100%;
  margin: 1rem 0;
  overflow-x: auto;
  display: block;
}

.markdown-content table th,
.markdown-content table td{
  border: 1px solid var(--border-color);
  padding: 0.75rem;
  text-align: left;
}

.markdown-content table th{
  background: var(--bg-tertiary);
  font-weight: 600;
}

.markdown-content table tr:nth-child(even){
  background: var(--bg-secondary);
}

.markdown-content hr{
  border: none;
  border-top: 1px solid var(--border-color);
  margin: 2rem 0;
}

/* Inline Code */
.markdown-content code:not(pre code){
  background: var(--bg-tertiary);
  color: #ff6b6b;
  padding: 0.2rem 0.4rem;
  border-radius: 4px;
  font-size: 0.9em;
  font-family: var(--mono);
}

/* Code Blocks */
.code-block-wrapper{
  margin: 1rem 0;
  border-radius: var(--r-sm);
  overflow: hidden;
  background: #0d1117;
  border: 1px solid var(--border-color);
}

.code-block-header{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  background: #161b22;
  border-bottom: 1px solid var(--border-color);
}

.code-language{
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.copy-code-btn{
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  padding: 0.375rem 0.75rem;
  border-radius: 6px;
  font-size: 0.875rem;
  cursor: pointer;
  transition: background var(--d2) var(--ease-out), color var(--d2) var(--ease-out), border-color var(--d2) var(--ease-out);
}

.copy-code-btn:hover{
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border-color: var(--accent-color);
}

.copy-code-btn.copied{
  background: #1a472a;
  color: #4ade80;
  border-color: #4ade80;
}

.markdown-content pre{
  margin: 0;
  padding: 1rem;
  overflow-x: auto;
  background: #0d1117;
}

.markdown-content pre code{
  display: block;
  padding: 0;
  background: transparent;
  color: #e6edf3;
  font-family: var(--mono);
  font-size: 0.875rem;
  line-height: 1.6;
}

/* Syntax Highlighting */
.hljs{
  background: #0d1117 !important;
  color: #e6edf3 !important;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-literal,
.hljs-section,
.hljs-link{
  color: #ff7b72 !important;
}

.hljs-string{
  color: #a5d6ff !important;
}

.hljs-title,
.hljs-name,
.hljs-type,
.hljs-attribute,
.hljs-symbol,
.hljs-bullet,
.hljs-built_in,
.hljs-addition,
.hljs-variable,
.hljs-template-tag,
.hljs-template-variable{
  color: #79c0ff !important;
}

.hljs-comment,
.hljs-quote,
.hljs-deletion,
.hljs-meta{
  color: #8b949e !important;
}

.hljs-number{
  color: #79c0ff !important;
}

.hljs-function{
  color: #d2a8ff !important;
}

/* =========================================================
   SCROLLBAR
   ========================================================= */
::-webkit-scrollbar{
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track{
  background: transparent;
}

::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--text-secondary) 30%, transparent);
  border-radius: 999px;
}

::-webkit-scrollbar-thumb:hover{
  background: color-mix(in srgb, var(--text-secondary) 45%, transparent);
}

.markdown-content pre::-webkit-scrollbar{
  height: 8px;
}

.markdown-content pre::-webkit-scrollbar-track{
  background: #161b22;
  border-radius: 4px;
}

.markdown-content pre::-webkit-scrollbar-thumb{
  background: var(--border-color);
  border-radius: 4px;
}

.markdown-content pre::-webkit-scrollbar-thumb:hover{
  background: var(--text-secondary);
}

/* =========================================================
   RESPONSIVE
   ========================================================= */
@media (max-width: 1024px){
  .main-container.with-sidebar{
    margin-left: 0;
  }

  .with-sidebar .input-wrapper{
    left: 0 !important;
  }

  .sidebar{
    transform: translateX(-100%);
    z-index: 1100;
  }

  .sidebar.show{
    transform: translateX(0);
  }

  .sidebar-overlay{
    display:block;
  }

  .model-selector-dropdown{
    width: 85%;
    max-width: 600px;
  }

  .auth-container{
    grid-template-columns: 1fr;
  }

  .auth-box{
    margin: 0 auto;
    max-width: 520px;
  }
}

@media (max-width: 768px){
  .top-nav{
    padding: 0 10px;
  }

  .nav-button span{
    display:none;
  }

  .nav-button.upgrade-btn span{
    display:none;
  }

  .nav-button.upgrade-btn::before{
    content: '⭐';
  }

  #selected-model-name{
    max-width: 80px;
    font-size: 0.75rem;
  }

  .center-content{
    padding: 18px 10px 140px;
  }

  .message{
    padding: 0 6px;
    max-width: 100%;
  }

  .user-message .message-content{
    max-width: 88%;
  }

  #chat-input{
    font-size: .95rem;
  }

  .suggestion-cards{
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .model-selector-dropdown{
    width: 95%;
    max-width: none;
  }

  .dropdown-menu{
    right: 10px;
    min-width: 200px;
  }
}

@media (max-width: 520px){
  .auth-box{
    padding: 1.5rem 1.25rem;
    border-radius: 18px;
  }

  .feature-item{
    padding: 0.9rem 0.9rem;
  }
}

@media (max-width: 480px){
  :root{
    --nav-h: 56px;
  }

  .top-nav{
    height: var(--nav-h);
  }

  .main-container{
    margin-top: 56px;
    min-height: calc(100vh - 56px);
  }

  .sidebar{
    top: 56px;
    height: calc(100vh - 56px);
    width: 100%;
    max-width: 320px;
  }

  .center-content{
    padding: 14px 10px 130px;
  }

  .welcome-section{
    padding: 46px 0 18px;
  }

  .main-heading{
    font-size: 1.55rem;
  }

  .send-button{
    width: 36px;
    height: 36px;
    min-width:36px;
    min-height:36px;
  }

  .preview-container img{
    max-width: 180px;
    max-height: 180px;
  }

  .input-box{
    max-width: 100%;
  }

  .input-actions{
    padding-bottom: 8px;
  }

  .action-pill{
    padding: 7px 10px;
    font-size: .85rem;
  }

  .model-selector-dropdown{
    top: 56px;
    max-height: calc(100vh - 66px);
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}
